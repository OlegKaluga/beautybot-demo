# 👨‍💼 Инструкция администратора BeautyBot Lite

## 📋 Оглавление

1. [Первый запуск](#первый-запуск)
2. [Вход в админ-панель](#вход-в-админ-панель)
3. [Управление рабочими днями](#управление-рабочими-днями)
4. [Управление слотами](#управление-слотами)
5. [Просмотр записей](#просмотр-записей)
6. [Отчёты](#отчёты)
7. [Работа с отзывами](#работа-с-отзывами)
8. [Чёрный список](#чёрный-список)
9. [Команды администратора](#команды-администратора)

---

## 🚀 Первый запуск

### 1. Настройка бота

1. Откройте файл `.env`
2. Укажите ваш токен от @BotFather:
   ```env
   BOT_TOKEN=8610176761:AAGk9fWblecuGCpdCFLqcVd_vkdttoQ1wDw
   ```
3. Укажите ваш Telegram ID:
   ```env
   ADMIN_IDS=272783403
   ```
   
   *Чтобы узнать свой ID, отправьте боту @userinfobot сообщение*

### 2. Запуск бота

```bash
python bot.py
```

### 3. Проверка

Отправьте боту команду `/admin` — должно открыться админ-меню.

---

## 🔐 Вход в админ-панель

**Способ 1:** Команда `/admin`

**Способ 2:** Кнопка "🛠 Админ-панель" (если есть в меню)

---

## 📅 Управление рабочими днями

### Добавление дней (новый интерфейс!)

1. Нажмите **"➕ Добавить день"**
2. Откроется календарь на текущий месяц

```
┌─────────────────────────────────┐
│  ⬅️  📅 Февраль 2026  ➡️       │
├─────────────────────────────────┤
│ Пн │ Вт │ Ср │ Чт │ Пт │ Сб │ Вс │
├────┼────┼────┼────┼────┼────┼────┤
│ ⬜ │ ⬜ │ ⬜ │ ⬜ │ ⬜ │ ✅ │ ⬜ │  ← 1 число
│ 🔵 │ ⬜ │ ⬜ │ ⬜ │ ⬜ │ ⬜ │ ⬜ │  ← 2 число (сегодня)
│ ⬜ │ ⬜ │ ⬜ │ ⬜ │ ⬜ │ ⬜ │ ⬜ │
└────┴────┴────┴────┴────┴────┴────┘
```

**Обозначения:**
- ✅ — день уже добавлен
- 🔵 — сегодня
- ⬜ — не добавлен

**Действия:**
- **Нажатие на дату** — добавить/удалить день
- **⬅️** — предыдущий месяц
- **➡️** — следующий месяц
- **➕ Добавить все** — добавить 30 дней вперёд
- **❌ Очистить** — удалить все дни (с подтверждением)

### Быстрое добавление

Нажмите **"➕ Добавить все"** — автоматически добавятся 30 дней начиная с сегодня.

### Закрытие дня

1. Нажмите **"❌ Закрыть день"**
2. Введите дату в формате `ГГГГ-ММ-ДД`
3. День будет помечен как закрытый (клиенты не смогут записаться)

---

## ⏰ Управление слотами

### Просмотр слотов

1. Нажмите **"⏰ Слоты"**
2. Выберите зал:
   - ✂️ Стрижки
   - 💅 Ногти
3. Выберите мастера (для стрижек)
4. Выберите дату

**Отображение слотов:**

```
┌────────────────────────────────────┐
│ ⏰10:00 │ ⏰11:00 │ ⏰12:00 │ ⏰13:00 │
├────────────────────────────────────┤
│ ⏰14:00 │ ⏰15:00 │ ❌16:00 │ ⏰17:00 │  ← 16:00 занято
├────────────────────────────────────┤
│ ⏰18:00 │  ⬜     │  ⬜     │  ⬜     │  ← ⬜ = слот удалён
└────────────────────────────────────┘
```

**Статусы слотов:**
- ⏰ — свободен
- ❌ — занят (имя клиента)
- ⬜ — удалён (недоступен для записи)

### Редактирование слотов

**Добавить слот:**
1. Нажмите на ⬜
2. Слот станет ✅ (добавлен)

**Удалить слот:**
1. Нажмите на ⏰
2. Слот станет ⬜ (удалён)

**Просмотр клиента:**
1. Нажмите на ❌ Иван
2. Откроется информация:
   ```
   📋 Запись на 2026-03-07 16:00
   🏛 Стрижки
   👤 Мастер 1
   💇 Стрижка
   
   👤 Клиент: Иван Иванов
   📱 +79991234567
   🆔 123456789
   
   [⛔ Забанить] [❌ Отменить] [🔙 Назад]
   ```

**Отмена записи:**
1. Нажмите **"❌ Отменить"**
2. Слот освободится
3. Клиент получит уведомление (опционально)

**Бан клиента:**
1. Нажмите **"⛔ Забанить"**
2. Клиент попадёт в чёрный список
3. Запись отменится автоматически

---

## 📋 Просмотр записей

### На конкретную дату

1. Нажмите **"📋 Записи"**
2. Выберите дату
3. Список всех записей:

```
📋 2026-03-07:

⏰ 10:00 | Стрижки | Мастер 1
   Иванов Иван — Стрижка
   📱 +79991234567

⏰ 11:00 | Стрижки | Мастер 2
   Петров Пётр — Стрижка бороды
   📱 +79999876543
```

**Действия:**
- Нажмите на ❌ время для отмены записи

### Активные записи клиента

1. Клиент нажимает **"🗓 Мои записи"**
2. Видит свою ближайшую запись
3. Может отменить нажатием **"❌ Отменить"**

---

## 📊 Отчёты

### Виды отчётов

**📊 Общий отчёт** — все залы вместе

**✂️ Стрижки** — только зал стрижек

**💅 Ногти** — только зал ногтей

### Пример отчёта

```
📊 ОБЩИЙ ОТЧЁТ за 02.2026

🏛 Стрижки:
  • Стрижка: 15 шт. = 12000₽
  • Стрижка бороды: 8 шт. = 4000₽
  • Комплекс: 5 шт. = 6000₽
  Итого: 22000₽

🏛 Ногти:
  • Маникюр: 20 шт. = 24000₽
  • Педикюр: 10 шт. = 15000₽
  • Покрытие гель-лак: 12 шт. = 21600₽
  Итого: 60600₽

💰 ОБЩАЯ ВЫРУЧКА: 82600₽
```

**Навигация:**
- **⬅️** — предыдущий месяц
- **➡️** — следующий месяц

---

## ⭐ Работа с отзывами

### Просмотр отзывов

1. Нажмите **"⭐ Отзывы"**
2. Откроется лента последних отзывов

```
⭐ Отзывы о салоне

Средний рейтинг: 4.8/5 (25 отзывов)

Распределение:
5⭐ ▮▮▮▮▮▮▮▮▮▮ 10
4⭐ ▮▮▮▮▮▮▮▮▯▯ 8
3⭐ ▮▮▮▯▯▯▯▯▯▯ 3
2⭐ ▮▮▯▯▯▯▯▯▯▯ 2
1⭐ ▮▮▯▯▯▯▯▯▯▯ 2

────────────────────

⭐⭐⭐⭐⭐ Анна (2026-02-28)
   Отличный салон! Мастер профессионал...

⭐⭐⭐⭐⭐ Елена (2026-02-27)
   Записалась на маникюр, всё понравилось!
```

**Действия:**
- **⭐ Оставить отзыв** — перейти к созданию отзыва
- **🔙 В меню** — выход

### Уведомления о плохих отзывах

Если оценка ≤ 3, админ получает уведомление:

```
⚠️ Новый отзыв (оценка 2/5)

👤 Анна Иванова
🆔 123456789
⭐⭐
Комментарий: Долго ждала, мастер опоздал...
```

---

## ⛔ Чёрный список

### Просмотр

1. Нажмите **"⛔ Чёрный список"**
2. Или команду `/blacklist`

```
⛔ Чёрный список:

👤 123456789
   Причина: Проблемный клиент (отмечен админом)
   Дата: 2026-02-28

👤 987654321
   Причина: Не пришёл на запись 3 раза
   Дата: 2026-02-25

Для разблокировки: /unban user_id
```

### Добавление в ЧС

**Способ 1: Из слота**
1. Откройте запись клиента
2. Нажмите **"⛔ Забанить"**

**Способ 2: Командой**
```
/ban 123456789 Не пришёл на запись
```

**Способ 3: Ответом на сообщение**
1. Ответьте на сообщение клиента
2. Отправьте: `/ban причина`

### Разблокировка

```
/unban 123456789
```

---

## ✉️ Написать клиенту

*(Функция в разработке)*

---

## 🔧 Команды администратора

| Команда | Описание |
|---------|----------|
| `/admin` | Открыть админ-панель |
| `/ban user_id [причина]` | Забанить пользователя |
| `/unban user_id` | Разбанить пользователя |
| `/blacklist` | Показать чёрный список |
| `/start` | Вернуться в меню клиента |
| `/help` | Помощь |

---

## ❓ Частые вопросы

### ❓ Как добавить выходной?

Нажмите **"➕ Добавить день"**, затем удаляйте дни, которые должны быть выходными.

### ❓ Как изменить время работы?

Сейчас слоты создаются автоматически 10:00-19:00. Для изменения нужно редактировать `database/db.py`.

### ❓ Клиент не может записаться?

Проверьте:
1. Есть ли рабочие дни (`➕ Добавить день`)
2. Есть ли слоты (`⏰ Слоты`)
3. Не в ЧС ли клиент (`⛔ Чёрный список`)

### ❓ Как посмотреть все записи на месяц?

К сожалению, сейчас можно смотреть только по дням. В разработке общий просмотр.

### ❓ Бот не отправляет напоминания?

Проверьте:
1. Бот запущен
2. У клиента не заблокирован бот
3. В логах нет ошибок

---

## 📞 Техподдержка

При проблемах:
1. Проверьте логи: `bot.log`
2. Проверьте БД: `python check_db.py`
3. Перезапустите бота

---

**Версия инструкции: 1.0**
**Дата: Февраль 2026**
